'Neos.MarketPlace:Document':
  abstract: TRUE
  ui:
    inspector:
      groups:
        document:
          label: i18n
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  superTypes:
    'TYPO3.Neos:Document': TRUE
    'TYPO3.Neos.Seo:TitleTagMixin': FALSE
    'TYPO3.Neos.Seo:SeoMetaTagsMixin': FALSE
    'TYPO3.Neos.Seo:TwitterCardMixin': FALSE
    'TYPO3.Neos.Seo:CanonicalLinkMixin': FALSE
    'TYPO3.Neos.Seo:OpenGraphMixin': FALSE
    'TYPO3.Neos.Seo:XmlSitemapMixin': FALSE

# Repository
'Neos.MarketPlace:RepositoryStorage':
  superTypes:
    'Neos.MarketPlace:Document': TRUE
  ui:
    label: i18n
    icon: 'icon-search'

# Vendor
'Neos.MarketPlace:Vendor':
  superTypes:
    'Neos.MarketPlace:Document': TRUE
  ui:
    label: i18n
    icon: 'icon-building'
  properties:
    title:
      type: string
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
          position: 1
    composerVendorKey:
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
          index: not_analyzed
        indexing: "${q(node).property('title')}"

# Package
'Neos.MarketPlace:Package':
  superTypes:
    'Neos.MarketPlace:Document': TRUE
  ui:
    label: i18n
    icon: 'icon-gift'
  childNodes:
    maintainers:
      position: 'before main'
      type: 'TYPO3.Neos:ContentCollection'
    authors:
      position: 'after maintainers'
      type: 'TYPO3.Neos:ContentCollection'
    versions:
      position: 'after authors'
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    title:
      type: string
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
          position: 1
    description:
      type: string
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    time:
      type: DateTime
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    type:
      type: string
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    repository:
      type: string
      search:
        elasticSearchMapping:
          type: string
          include_in_all: true
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    favers:
      type: string
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document

# People
'Neos.MarketPlace:People':
  abstract: TRUE
  superTypes:
    'TYPO3.Neos:Content': TRUE
  properties:
    title:
      type: string
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    email:
      type: string
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document
    homepage:
      type: string
      ui:
        label: i18n
        reloadIfChanged: TRUE
        inspector:
          group: document

# Maintainer
'Neos.MarketPlace:Maintainer':
  superTypes:
    'Neos.MarketPlace:People': TRUE
  search:
    fulltext:
      enable: false
  ui:
    label: i18n
    icon: 'icon-user'

# Version
'Neos.MarketPlace:Version':
  label: "${q(node).property('name') + ' (' + q(node).property('type') + ')'}"
  superTypes:
    'TYPO3.Neos:Content': TRUE
  childNodes:
    source:
      position: 'before main'
      type: 'Neos.MarketPlace:Source'
    dist:
      position: 'before main'
      type: 'Neos.MarketPlace:Dist'
  search:
    fulltext:
      enable: false
  ui:
    label: i18n
    icon: 'icon-file-o'
  properties:
    name:
      type: string
      ui:
        label: i18n
    description:
      type: string
      ui:
        label: i18n
    keywords:
      type: string
      ui:
        label: i18n
    homepage:
      type: string
      ui:
        label: i18n
    version:
      type: string
      ui:
        label: i18n
    versionNormalized:
      type: string
      ui:
        label: i18n
    license:
      type: string
      ui:
        label: i18n
    type:
      type: string
      ui:
        label: i18n
    time:
      type: DateTime
      ui:
        label: i18n
    provide:
      type: string
      ui:
        label: i18n
    bin:
      type: string
      ui:
        label: i18n
    require:
      type: string
      ui:
        label: i18n
    requireDev:
      type: string
      ui:
        label: i18n
    suggest:
      type: string
      ui:
        label: i18n
    conflict:
      type: string
      ui:
        label: i18n
    replace:
      type: string
      ui:
        label: i18n

'Neos.MarketPlace:Source':
  superTypes:
    'TYPO3.Neos:Content': TRUE
  properties:
    type:
      type: string
      ui:
        label: i18n
    url:
      type: string
      ui:
        label: i18n
    reference:
      type: string
      ui:
        label: i18n

'Neos.MarketPlace:Dist':
  superTypes:
    'Neos.MarketPlace:Source': TRUE
  properties:
    shasum:
      type: string
      ui:
        label: i18n
